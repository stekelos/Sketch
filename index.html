<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Color Diary</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
            background-color: #f0f0f0;
        }
        .toolbox {
            margin: 20px 0;
        }
        .day {
            width: 40px;
            height: 40px;
            display: inline-block;
            margin: 5px;
            border: 1px solid #ccc;
            cursor: pointer;
        }
        #diary {
            max-width: 600px;
            margin: 0 auto;
        }
        input, button {
            padding: 8px;
            margin: 5px;
        }
        #periodFilter {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h2>Mood Color Diary</h2>
    <div class="toolbox">
        <input type="color" id="moodColor" value="#ffffff">
        <input type="date" id="moodDate">
        <button onclick="addMood()">Προσθήκη Διάθεσης</button>
    </div>
    <div id="periodFilter">
        <label>Φίλτρο Περιόδου: </label>
        <input type="date" id="startDate">
        <input type="date" id="endDate">
        <button onclick="filterMoods()">Εφαρμογή</button>
    </div>
    <div id="diary"></div>

    <script>
        let moods = JSON.parse(localStorage.getItem('moods')) || [];

        // Εμφάνιση ημερολογίου
        function renderDiary(filteredMoods = moods) {
            const diary = document.getElementById('diary');
            diary.innerHTML = '';
            filteredMoods.sort((a, b) => new Date(a.date) - new Date(b.date)); // Ταξινόμηση κατά ημερομηνία

            filteredMoods.forEach(mood => {
                const div = document.createElement('div');
                div.className = 'day';
                div.style.backgroundColor = mood.color;
                div.title = `Ημερομηνία: ${new Date(mood.date).toLocaleDateString('el-GR')}`;
                diary.appendChild(div);
            });

            if (filteredMoods.length === 0) {
                diary.innerHTML = '<p>Δεν υπάρχουν διαθέσεις για αυτή την περίοδο.</p>';
            }
        }

        // Προσθήκη νέας διάθεσης
        function addMood() {
            const color = document.getElementById('moodColor').value;
            const dateInput = document.getElementById('moodDate').value;
            const date = dateInput ? new Date(dateInput).toISOString() : new Date().toISOString();

            moods.push({ color, date });
            localStorage.setItem('moods', JSON.stringify(moods));
            renderDiary();
        }

        // Φιλτράρισμα διάθεσης ανά περίοδο
        function filterMoods() {
            const startDate = new Date(document.getElementById('startDate').value);
            const endDate = new Date(document.getElementById('endDate').value);

            if (!startDate || !endDate || startDate > endDate) {
                alert('Παρακαλώ διάλεξε έγκυρες ημερομηνίες!');
                return;
            }

            const filteredMoods = moods.filter(mood => {
                const moodDate = new Date(mood.date);
                return moodDate >= startDate && moodDate <= endDate;
            });

            renderDiary(filteredMoods);
        }

        // Αρχική εμφάνιση
        renderDiary();

        // Προεπιλογή σημερινής ημερομηνίας
        document.getElementById('moodDate').value = new Date().toISOString().split('T')[0];
    </script>
</body>
</html>
